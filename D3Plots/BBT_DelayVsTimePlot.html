<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/nvd3/1.7.0/nv.d3.min.css" rel="stylesheet" type="text/css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.2/d3.min.js" charset="utf-8"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/nvd3/1.7.0/nv.d3.min.js"></script>

    <style>
        text {
            font: 12px sans-serif;
        }

        svg {
            display: block;
        }

        html,
        body,
        #chart1,
        svg {
            margin: 0px;
            padding: 0px;
            height: 100%;
            width: 100%;
        }
    </style>
</head>

<body>
    <div id="chart1">
        <svg>
        </svg>
    </div>

    <script>
        historicalBarChart = [
            {
                key: "DelaysByTime",
                values: [
                    {
                        "label": "0",
                        "value": 189
                },
                    {
                        "label": "1",
                        "value": 177
                },
                    {
                        "label": "2",
                        "value": 155
                },
                    {
                        "label": "3",
                        "value": 125
                },
                    {
                        "label": "4",
                        "value": 199
                },
                    {
                        "label": "5",
                        "value": 111
                },
                    {
                        "label": "6",
                        "value": 173
                },
                    {
                        "label": "7",
                        "value": 222
                },
                    {
                        "label": "8",
                        "value": 277
                },
                    {
                        "label": "9",
                        "value": 271
                },
                    {
                        "label": "10",
                        "value": 239
                },
                    {
                        "label": "11",
                        "value": 262
                },
                    {
                        "label": "12",
                        "value": 269
                },
                    {
                        "label": "13",
                        "value": 279
                },
                    {
                        "label": "14",
                        "value": 276
                },
                    {
                        "label": "15",
                        "value": 293
                },
                    {
                        "label": "16",
                        "value": 327
                },
                    {
                        "label": "17",
                        "value": 350
                },
                    {
                        "label": "18",
                        "value": 390
                },
                    {
                        "label": "19",
                        "value": 328
                },
                    {
                        "label": "20",
                        "value": 294
                },
                    {
                        "label": "21",
                        "value": 307
                },
                    {
                        "label": "22",
                        "value": 320
                },
                    {
                        "label": "23",
                        "value": 252
                }
            ]
        }
    ];

        nv.addGraph(function () {
            var chart = nv.models.discreteBarChart()
                .x(function (d) {
                    return d.label
                })
                .y(function (d) {
                    return d.value
                })
                .staggerLabels(true)
                //.staggerLabels(historicalBarChart[0].values.length > 8)
                .showValues(true)
                .duration(250);
            //        chart.title.("Average Delay over the time of the day");
            chart.yAxis.axisLabel("Seconds delayed");
            chart.xAxis.axisLabel("Hour of the day").axisLabelDistance(-10);
            d3.select('#chart1 svg')
                .datum(historicalBarChart)
                .call(chart).append("text")
                .attr("x", 600)
                .attr("y", 20)
                .attr("text-anchor", "middle")
                .text("Average Delay over time of day");

            nv.utils.windowResize(chart.update);

            return chart;
        });
    </script>
</body>

</html>
